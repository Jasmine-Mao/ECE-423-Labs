//
//  mjpeg423_decoder.h
//  mjpeg423app
//
//  Created by Rodolfo Pellizzoni on 12/24/13.
//  Copyright (c) 2013 __MyCompanyName__. All rights reserved.
//

#ifndef mjpeg423app_mjpeg423_decoder_h
#define mjpeg423app_mjpeg423_decoder_h

#include "../common/mjpeg423_types.h"

typedef struct {
    double max_us[2];
    double min_us[2];
    double sum_us[2];
} performance_t;

typedef struct {
    uint32_t max[2];
    uint32_t min[2];
    uint32_t sum[2];
} performance_m;
#define TIMER_FPS 10

void mjpeg423_decode(const char* filename_in);
void mjpeg423_decode_to_vdma_init_file(const char* filename_in);
uint8_t mjpeg423_decode_to_vdma_single_frame();
uint8_t mjpeg423_decode_to_vdma_is_last_frame();
void mjpeg423_decode_to_vdma_free_current_file();
void mjpeg423_decode_to_vdma_print_stats();
uint8_t mjpeg423_decode_to_vdma_seek_forward();
uint8_t mjpeg423_decode_to_vdma_seek_backward();
void mjpeg423_decode_to_vdma_seek_to_beginning();
void set_underflow_count();
void ycbcr_to_rgb(int h, int w, uint32_t w_size, pcolor_block_t Y, pcolor_block_t Cb, pcolor_block_t Cr, rgb_pixel_t* rgbblock);
void idct(dct_block_t DCAC, color_block_t block);
void lossless_decode(int num_blocks, void* bitstream, dct_block_t* DCACq, dct_block_t quant, BOOL P);

#endif
